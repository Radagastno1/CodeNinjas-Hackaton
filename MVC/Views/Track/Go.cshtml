@model CORE.Entities.Track //gör trackviewmodel

@{
    ViewData["Title"] = "Spår - " + Model.track_name;
}

<body>
    <header>
        <div>
            <h1>7-GO</h1>
        </div>
        <div>
            <a href="/logout">Logga ut</a>
            <a href="/about">Om 7-GO</a>
        </div>
    </header>

<main>
    <h1>Min karta</h1>
    <div id="map-container">
        <iframe
            width="600"
            height="450"
            frameborder="0"
            style="border:0"
            @* src=@($"https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d14694.170905708124!2d{Model.longitude}!3d{Model.latitude}!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sen!2sus!4v1621504857561!5m2!1sen!2sus") *@
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2383.529163644095!2d12.9786216!3d57.7079477!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x46500a77d54b6e11%3A0xb283d6c607480316!2sKransmossens%20friluftsg%C3%A5rd!5e0!3m2!1sen!2sus!4v1621504857561!5m2!1sen!2sus"
            allowfullscreen
        ></iframe>
    </div>

        @* <div id="map"></div>
        <div id="directionsPanel"></div>

        <script>
            function initMap() {
                // Skapa en karta
                var map = new google.maps.Map(document.getElementById('map'), {
                    zoom: 12,
                    center: { lat: @Model.latitude, lng: @Model.longitude } // Spårets koordinater
                }); *@

@* 
                // Skapa en markör för spåret
                var marker = new google.maps.Marker({
                    position: { lat: @Model.latitude, lng: @Model.longitude },
                    map: map,
                    title: "@Model.track_name"
                });

                // Skapa en ruttvisningstjänst
                var directionsService = new google.maps.DirectionsService();
                var directionsRenderer = new google.maps.DirectionsRenderer({ suppressMarkers: true });
                directionsRenderer.setMap(map);
                directionsRenderer.setPanel(document.getElementById('directionsPanel'));

                // Hämta användarens plats
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(function (position) {
                        var userLocation = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

                        // Skapa en rutt från användarens plats till spåret
                        var request = {
                            origin: userLocation,
                            destination: { lat: @Model.latitude, lng: @Model.longitude },
                            travelMode: google.maps.TravelMode.WALKING
                        };

                        // Beräkna och visa ruttvägbeskrivning
                        directionsService.route(request, function (result, status) {
                            if (status == google.maps.DirectionsStatus.OK) {
                                directionsRenderer.setDirections(result);
                            }
                        });
                    });
                }
            }
        </script>

        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=AIzaSyDVupq7kP99czQyiT7Tr6yH3syR2qZ6NaA&callback=initMap" async defer></script> *@
</main>

<footer>

</footer>

</body>
